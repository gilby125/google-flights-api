# =============================================================================
# Worker Node Configuration (Tailscale)
# =============================================================================
# For use with docker-compose.worker.tailscale.yml
# Connects to main server via Tailscale mesh VPN - no public internet exposure!
# =============================================================================

# -----------------------------------------------------------------------------
# Tailscale Authentication (REQUIRED)
# -----------------------------------------------------------------------------
# Get an auth key from: https://login.tailscale.com/admin/settings/keys
# Use a reusable key for easier deployment across multiple workers
# NOTE: leave blank in git; set a real key only in your local `.env.worker.tailscale`.
TS_AUTHKEY=

# Main server's Tailscale IP (run `tailscale ip -4` on main server)
# Or use MagicDNS hostname like "main-server" if enabled
TS_MAIN_SERVER_IP=100.64.1.1

# -----------------------------------------------------------------------------
# Worker Identification
# -----------------------------------------------------------------------------
# Unique ID per worker for monitoring/debugging
WORKER_ID=worker-us-east-1

# -----------------------------------------------------------------------------
# Database Credentials (same as main server)
# -----------------------------------------------------------------------------
DB_USER=flights
DB_PASSWORD=your-db-password
DB_NAME=flights
DB_PORT=5432
DB_SSLMODE=disable

# -----------------------------------------------------------------------------
# Redis Credentials (same as main server)
# -----------------------------------------------------------------------------
REDIS_PASSWORD=your-redis-password
REDIS_PORT=6379
REDIS_QUEUE_GROUP=flights_workers
REDIS_QUEUE_STREAM_PREFIX=flights

# -----------------------------------------------------------------------------
# Neo4j (optional)
# -----------------------------------------------------------------------------
NEO4J_USER=neo4j
NEO4J_PASSWORD=your-neo4j-password

# -----------------------------------------------------------------------------
# Worker Settings
# -----------------------------------------------------------------------------
WORKER_CONCURRENCY=4
WORKER_JOB_TIMEOUT=10m
WORKER_MAX_RETRIES=3

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
LOG_LEVEL=info
LOG_FORMAT=json
ENVIRONMENT=production
