# Worker process (Docker + systemd)
#
# Copy to: /etc/google-flights/worker.docker.env

# Image to run
WORKER_IMAGE=ghcr.io/gilby125/flight-api:latest

# Core settings
ENVIRONMENT=production
API_ENABLED=false
WORKER_ENABLED=true
INIT_SCHEMA=false
SEED_NEO4J=false

# Worker pool settings
WORKER_CONCURRENCY=4
WORKER_JOB_TIMEOUT=10m
WORKER_MAX_RETRIES=3
WORKER_RETRY_DELAY=30s
WORKER_SHUTDOWN_TIMEOUT=30s

# Scheduler leader election
SCHEDULER_LOCK_KEY=scheduler:leader
SCHEDULER_LOCK_TTL=30s
SCHEDULER_LOCK_RENEW=10s

# Central Postgres / Redis / Neo4j (over Tailscale)
DB_HOST=
DB_PORT=5432
DB_USER=flights
DB_PASSWORD=
DB_NAME=flights
DB_SSLMODE=disable
DB_REQUIRE_SSL=false

REDIS_HOST=
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_QUEUE_GROUP=flights_workers
REDIS_QUEUE_STREAM_PREFIX=flights
REDIS_QUEUE_BLOCK_TIMEOUT=5s
REDIS_QUEUE_VISIBILITY_TIMEOUT=2m

NEO4J_URI=
NEO4J_USER=neo4j
NEO4J_PASSWORD=

# Logging
# LOG_LEVEL: debug | info | warn | error
LOG_LEVEL=info
# LOG_FORMAT: json | text
LOG_FORMAT=json

